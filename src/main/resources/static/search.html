    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê²€ìƒ‰ ê²°ê³¼ - ì‹¹ì“°ë¦¬</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
                background: #fafafa;
                min-height: 100vh;
            }

            header {
                background: #ffffff;
                padding: 20px 40px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 24px;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
                position: sticky;
                top: 0;
                z-index: 100;
                border-bottom: 1px solid #f0f0f0;
            }

            .logo {
                font-size: 26px;
                font-weight: 700;
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                letter-spacing: -0.5px;
                cursor: pointer;
                flex-shrink: 0;
            }

            .search-container {
                flex: 1;
                max-width: 500px;
                position: relative;
            }

            .search-wrapper {
                display: flex;
                gap: 8px;
                background: #f8f9fa;
                padding: 8px 16px;
                border-radius: 24px;
                border: 2px solid transparent;
                transition: all 0.3s ease;
            }

            .search-wrapper:focus-within {
                background: white;
                border-color: #74b9ff;
                box-shadow: 0 0 0 4px rgba(116, 185, 255, 0.1);
            }

            .search-input {
                flex: 1;
                border: none;
                background: transparent;
                font-size: 14px;
                outline: none;
                color: #495057;
            }

            .search-input::placeholder {
                color: #adb5bd;
            }

            .search-btn {
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                border: none;
                width: 36px;
                height: 36px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 16px;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .search-btn:hover {
                transform: scale(1.1);
                box-shadow: 0 4px 12px rgba(116, 185, 255, 0.35);
            }

            .header-icons {
                display: flex;
                gap: 12px;
                align-items: center;
            }

            .icon-btn {
                background: #f8f9fa;
                border: none;
                width: 42px;
                height: 42px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 18px;
                transition: all 0.2s ease;
                color: #495057;
            }

            .icon-btn:hover {
                background: #e9ecef;
                transform: translateY(-2px);
            }

            .auth-btn {
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 12px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 600;
                transition: all 0.2s ease;
                box-shadow: 0 4px 12px rgba(116, 185, 255, 0.35);
            }

            .auth-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(116, 185, 255, 0.45);
            }

            .user-info {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .logout-btn {
                background: #f8f9fa;
                border: none;
                padding: 8px 16px;
                border-radius: 10px;
                cursor: pointer;
                font-size: 13px;
                font-weight: 600;
                color: #495057;
                transition: all 0.2s ease;
            }

            .logout-btn:hover {
                background: #e9ecef;
            }

            .back-btn {
                background: #f8f9fa;
                border: none;
                padding: 10px 20px;
                border-radius: 12px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 600;
                color: #495057;
                transition: all 0.2s ease;
                margin: 20px 40px;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .back-btn:hover {
                background: #e9ecef;
            }

            .search-result-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 40px 20px;
            }

            .search-info {
                margin-bottom: 32px;
            }

            .search-keyword {
                font-size: 28px;
                font-weight: 700;
                color: #212529;
                margin-bottom: 12px;
            }

            .search-keyword span {
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .search-count {
                font-size: 16px;
                color: #6b7280;
            }

            .filter-section {
                background: white;
                padding: 24px;
                border-radius: 16px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
                margin-bottom: 32px;
                display: flex;
                gap: 16px;
                align-items: center;
                flex-wrap: wrap;
            }

            .filter-label {
                font-size: 14px;
                font-weight: 600;
                color: #495057;
            }

            .price-inputs {
                display: flex;
                gap: 8px;
                align-items: center;
            }

            .price-input {
                width: 120px;
                padding: 10px 12px;
                border: 2px solid #e5e7eb;
                border-radius: 10px;
                font-size: 14px;
                outline: none;
                transition: all 0.3s ease;
            }

            .price-input:focus {
                border-color: #74b9ff;
            }

            .filter-btn {
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 10px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 600;
                transition: all 0.2s ease;
                box-shadow: 0 2px 8px rgba(116, 185, 255, 0.3);
            }

            .filter-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(116, 185, 255, 0.4);
            }

            .reset-btn {
                background: #f8f9fa;
                color: #495057;
                border: none;
                padding: 10px 20px;
                border-radius: 10px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 600;
                transition: all 0.2s ease;
            }

            .reset-btn:hover {
                background: #e9ecef;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                gap: 24px;
            }

            .product-card {
                background: white;
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                cursor: pointer;
                border: 1px solid #f0f0f0;
            }

            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
                border-color: #e9ecef;
            }

            .product-image {
                width: 100%;
                height: 200px;
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 70px;
            }

            .product-card:hover .product-image {
                background: linear-gradient(135deg, #74b9ff15 0%, #a29bfe15 100%);
            }

            .product-info {
                padding: 20px;
            }

            .product-name {
                font-size: 16px;
                font-weight: 600;
                color: #212529;
                margin-bottom: 8px;
                letter-spacing: -0.3px;
            }

            .product-desc {
                font-size: 13px;
                color: #868e96;
                margin-bottom: 12px;
                line-height: 1.4;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .product-price {
                font-size: 18px;
                font-weight: 700;
                background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .loading {
                text-align: center;
                padding: 60px 20px;
                font-size: 18px;
                color: #6b7280;
            }

            .no-results {
                text-align: center;
                padding: 80px 20px;
            }

            .no-results-icon {
                font-size: 80px;
                margin-bottom: 24px;
            }

            .no-results-title {
                font-size: 24px;
                font-weight: 700;
                color: #212529;
                margin-bottom: 12px;
            }

            .no-results-desc {
                font-size: 16px;
                color: #6b7280;
            }

            footer {
                background: #212529;
                color: #adb5bd;
                text-align: center;
                padding: 40px 20px;
                margin-top: 60px;
            }

            footer p {
                margin: 10px 0;
                font-size: 14px;
                line-height: 1.6;
            }

            footer p:first-child {
                color: white;
                font-weight: 600;
                font-size: 15px;
            }

            @media (max-width: 768px) {
                .filter-section {
                    flex-direction: column;
                    align-items: stretch;
                }

                .price-inputs {
                    flex-direction: column;
                    width: 100%;
                }

                .price-input {
                    width: 100%;
                }

                .back-btn {
                    margin: 20px;
                }

                header {
                    padding: 16px 20px;
                }
            }
        </style>
    </head>
    <body>
    <header>
        <div class="logo" onclick="location.href='home.html'">ğŸŒŠ ì‹¹ì“°ë¦¬</div>

        <!-- ê²€ìƒ‰ì°½ -->
        <div class="search-container">
            <div class="search-wrapper">
                <input
                        type="text"
                        class="search-input"
                        id="searchInput"
                        placeholder="ìƒí’ˆì„ ê²€ìƒ‰í•´ë³´ì„¸ìš” ğŸ”"
                        onkeypress="handleSearchEnter(event)"
                >
                <button class="search-btn" onclick="handleSearch()">ğŸ”</button>
            </div>
        </div>

        <div class="header-icons">
            <button class="icon-btn">ğŸ›’</button>

            <!-- ë¡œê·¸ì¸ ì•ˆ ëœ ê²½ìš° -->
            <button class="auth-btn" id="loginBtn" style="display: none;">ë¡œê·¸ì¸ / íšŒì›ê°€ì…</button>

            <!-- ë¡œê·¸ì¸ ëœ ê²½ìš° -->
            <div class="user-info" id="userInfo" style="display: none;">
                <button class="icon-btn" id="myPageBtn" title="ë§ˆì´í˜ì´ì§€">ğŸ‘¤</button>
                <button class="logout-btn" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </header>

    <button class="back-btn" onclick="history.back()">â† ë’¤ë¡œê°€ê¸°</button>

    <div class="search-result-container">
        <div class="search-info">
            <h1 class="search-keyword">'<span id="keywordDisplay"></span>' ê²€ìƒ‰ ê²°ê³¼</h1>
            <p class="search-count" id="resultCount">ê²€ìƒ‰ ì¤‘...</p>
        </div>

        <div class="filter-section">
            <span class="filter-label">ê°€ê²© ë²”ìœ„</span>
            <div class="price-inputs">
                <input type="number" class="price-input" id="minPrice" placeholder="ìµœì†Œ ê°€ê²©" step="1000" min="0">
                <span>~</span>
                <input type="number" class="price-input" id="maxPrice" placeholder="ìµœëŒ€ ê°€ê²©" step="1000" min="0">
            </div>
            <button class="filter-btn" onclick="applyFilter()">ì ìš©</button>
            <button class="reset-btn" onclick="resetFilter()">ì´ˆê¸°í™”</button>
        </div>

        <div id="resultsContainer">
            <div class="loading">ìƒí’ˆì„ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
        </div>
    </div>

    <footer>
        <p>Â© 2025 ì‹¹ì“°ë¦¬ - ëª¨ë‘ë¥¼ ìœ„í•œ ê·€ì—¬ìš´ êµ¿ì¦ˆ</p>
        <p>ê³ ê°ì„¼í„°: 010-1234-5678 | <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aecdc1c0dacfcddaeeddddcfc59d80cdc1c3">[email&#160;protected]</a></p>
        <p>ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ | ì´ìš©ì•½ê´€ | ë°°ì†¡ì •ì±…</p>
    </footer>

    <script>
        // API URL ì„¤ì •
        const API_URL = (() => {
            const hostname = window.location.hostname;

            if (hostname === 'localhost' || hostname === '127.0.0.1') {
                return 'http://localhost:8080';
            }

            if (hostname === 'admin.ssak3.store') {
                return 'https://admin.ssak3.store';
            }

            return 'https://ssak3.store';
        })();

        async function checkLoginStatus() {
            const token = localStorage.getItem('accessToken');
            const loginBtn = document.getElementById('loginBtn');
            const userInfo = document.getElementById('userInfo');

            try {
                const headers = {};
                if (token) headers.Authorization = 'Bearer ' + token;

                const response = await fetch(`${API_URL}/ssak3/users/me`, {
                    method: 'GET',
                    headers: headers,
                    credentials: 'include'
                });

                if (response.ok) {
                    loginBtn.style.display = 'none';
                    userInfo.style.display = 'flex';
                } else {
                    localStorage.removeItem('accessToken');
                    loginBtn.style.display = 'block';
                    userInfo.style.display = 'none';
                }
            } catch (e) {
                localStorage.removeItem('accessToken');
                loginBtn.style.display = 'block';
                userInfo.style.display = 'none';
            }
        }

        document.getElementById('loginBtn').onclick = () => location.href = 'login.html';
        document.getElementById('myPageBtn').onclick = () => location.href = 'mypage.html';

        document.getElementById('logoutBtn').onclick = function() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('accessToken');
                alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                location.reload();
            }
        };

        checkLoginStatus();

        // URL íŒŒë¼ë¯¸í„° ì•ˆì „ ì²˜ë¦¬
        const urlParams = new URLSearchParams(window.location.search);

        let currentKeyword = urlParams.get('keyword') || '';
        let currentMinPrice = urlParams.get('minPrice');
        let currentMaxPrice = urlParams.get('maxPrice');

        if (currentMinPrice !== null && currentMinPrice !== '') {
            currentMinPrice = parseInt(currentMinPrice);
        } else {
            currentMinPrice = null;
        }

        if (currentMaxPrice !== null && currentMaxPrice !== '') {
            currentMaxPrice = parseInt(currentMaxPrice);
        } else {
            currentMaxPrice = null;
        }

        const productEmojis = ['ğŸï¸','âœ¨','âš”ï¸','ğŸ®','ğŸµ','âš¡','ğŸŒˆ','ğŸ’','ğŸ¨','ğŸ§¸'];

        document.getElementById('keywordDisplay').textContent = currentKeyword;
        document.getElementById('searchInput').value = currentKeyword;
        if (currentMinPrice !== null) document.getElementById('minPrice').value = currentMinPrice;
        if (currentMaxPrice !== null) document.getElementById('maxPrice').value = currentMaxPrice;

        function handleSearch() {
            const keyword = document.getElementById('searchInput').value.trim();
            if (!keyword) {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            location.href = `search.html?keyword=${encodeURIComponent(keyword)}`;
        }

        function handleSearchEnter(e) {
            if (e.key === 'Enter') handleSearch();
        }

        function applyFilter() {
            const min = document.getElementById('minPrice').value;
            const max = document.getElementById('maxPrice').value;

            let url = `search.html?keyword=${encodeURIComponent(currentKeyword)}`;

            if (min !== '' && !isNaN(min)) {
                url += `&minPrice=${parseInt(min)}`;
            }

            if (max !== '' && !isNaN(max)) {
                url += `&maxPrice=${parseInt(max)}`;
            }

            location.href = url;
        }

        function resetFilter() {
            location.href = `search.html?keyword=${encodeURIComponent(currentKeyword)}`;
        }

        async function searchProducts() {
            try {
                let url = `${API_URL}/ssak3/products?`;
                const params = [];

                if (currentKeyword.trim() !== '') {
                    params.push(`keyword=${encodeURIComponent(currentKeyword.trim())}`);
                }

                if (currentMinPrice !== null) {
                    params.push(`minPrice=${currentMinPrice}`);
                }

                if (currentMaxPrice !== null) {
                    params.push(`maxPrice=${currentMaxPrice}`);
                }

                params.push('page=0');
                params.push('size=20');

                url += params.join('&');

                const response = await fetch(url);
                if (!response.ok) throw new Error();

                const result = await response.json();
                displayResults(result.data);

            } catch (e) {
                showError();
            }
        }

        function displayResults(data) {
            const container = document.getElementById('resultsContainer');
            const products = data?.content || [];

            document.getElementById('resultCount').textContent =
                `ì´ ${data?.totalElements || 0}ê°œì˜ ìƒí’ˆì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`;

            if (products.length === 0) {
                container.innerHTML = `
                <div class="no-results">
                    <div class="no-results-icon">ğŸ”</div>
                    <div class="no-results-title">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                    <div class="no-results-desc">ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ì‹œë„í•´ë³´ì„¸ìš”</div>
                </div>
            `;
                return;
            }

            const html = products.map((p,i) => `
            <div class="product-card" onclick="location.href='product-detail.html?id=${p.productId}'">
                <div class="product-image">${productEmojis[i % productEmojis.length]}</div>
                <div class="product-info">
                    <div class="product-name">${p.name}</div>
                    <div class="product-desc">${p.information || 'ìƒí’ˆ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤'}</div>
                    <div class="product-price">${p.price.toLocaleString()}ì›</div>
                </div>
            </div>
        `).join('');

            container.innerHTML = `<div class="products-grid">${html}</div>`;
        }

        function showError() {
            document.getElementById('resultsContainer').innerHTML = `
            <div class="no-results">
                <div class="no-results-icon">ğŸ˜¢</div>
                <div class="no-results-title">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</div>
                <div class="no-results-desc">ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”</div>
            </div>
        `;
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (currentKeyword.trim() !== '') {
                searchProducts();
            } else {
                document.getElementById('resultsContainer').innerHTML = `
                <div class="no-results">
                    <div class="no-results-icon">ğŸ”</div>
                    <div class="no-results-title">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                    <div class="no-results-desc">ì›í•˜ì‹œëŠ” ìƒí’ˆì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”</div>
                </div>
            `;
            }
        });
    </script>

    </body>
    </html>
